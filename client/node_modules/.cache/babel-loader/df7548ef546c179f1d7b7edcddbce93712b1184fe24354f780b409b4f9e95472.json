{"ast":null,"code":"import{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{useCookies}from'react-cookie';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthModal=_ref=>{let{setShowModal,isSignUp}=_ref;const[email,setEmail]=useState(null);const[password,setPassword]=useState(null);const[confirmPassword,setConfirmPassword]=useState(null);const[error,setError]=useState(null);const[cookies,setCookie,removeCookie]=useCookies(null);let navigate=useNavigate();console.log(email,password,confirmPassword);const handleClick=()=>{setShowModal(false);};const handleSubmit=async e=>{e.preventDefault();try{if(isSignUp&&password!==confirmPassword){setError('Passwords need to match!');return;}const response=await axios.post(\"http://localhost:8000/\".concat(isSignUp?'signup':'login'),{email,password});setCookie('AuthToken',response.data.token);setCookie('UserId',response.data.userId);const success=response.status===201;if(success&&isSignUp)navigate('/onboarding');if(success&&!isSignUp)navigate('/dashboard');window.location.reload();}catch(error){console.log(error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"close-icon\",onClick:handleClick,children:\"\\u24E7\"}),/*#__PURE__*/_jsx(\"h2\",{children:isSignUp?'CREATE ACCOUNT':'LOG IN'}),/*#__PURE__*/_jsx(\"p\",{children:\"By clicking Log In, you agree to our terms. Learn how we process your data in our Privacy Policy and Cookie Policy.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"email\",required:true,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"password\",required:true,onChange:e=>setPassword(e.target.value)}),isSignUp&&/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password-check\",name:\"password-check\",placeholder:\"confirm password\",required:true,onChange:e=>setConfirmPassword(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{className:\"secondary-button\",type:\"submit\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"GET THE APP\"})]});};export default AuthModal;","map":{"version":3,"names":["useState","axios","useNavigate","useCookies","jsx","_jsx","jsxs","_jsxs","AuthModal","_ref","setShowModal","isSignUp","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","error","setError","cookies","setCookie","removeCookie","navigate","console","log","handleClick","handleSubmit","e","preventDefault","response","post","concat","data","token","userId","success","status","window","location","reload","className","children","onClick","onSubmit","type","id","name","placeholder","required","onChange","target","value"],"sources":["/Users/apple/Documents/tinder-clone/client/src/components/AuthModal.js"],"sourcesContent":["import { useState } from 'react'\nimport axios from 'axios'\nimport { useNavigate } from 'react-router-dom'\nimport { useCookies } from 'react-cookie'\n\n\nconst AuthModal = ({ setShowModal,  isSignUp }) => {\n    const [email, setEmail] = useState(null)\n    const [password, setPassword] = useState(null)\n    const [confirmPassword, setConfirmPassword] = useState(null)\n    const [error, setError] = useState(null)\n    const [ cookies, setCookie, removeCookie] = useCookies(null)\n\n    let navigate = useNavigate()\n\n    console.log(email, password, confirmPassword)\n\n\n    const handleClick = () => {\n        setShowModal(false)\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault()\n\n        try {\n            if (isSignUp && (password !== confirmPassword)) {\n                setError('Passwords need to match!')\n                return\n            }\n\n            const response = await axios.post(`http://localhost:8000/${isSignUp ? 'signup' : 'login'}`, { email, password })\n\n            setCookie('AuthToken', response.data.token)\n            setCookie('UserId', response.data.userId)\n\n            const success = response.status === 201\n            if (success && isSignUp) navigate ('/onboarding')\n            if (success && !isSignUp) navigate ('/dashboard')\n\n            window.location.reload()\n\n        } catch (error) {\n            console.log(error)\n        }\n\n    }\n\n    return (\n        <div className=\"auth-modal\">\n            <div className=\"close-icon\" onClick={handleClick}>â“§</div>\n\n            <h2>{isSignUp ? 'CREATE ACCOUNT': 'LOG IN'}</h2>\n            <p>By clicking Log In, you agree to our terms. Learn how we process your data in our Privacy Policy and Cookie Policy.</p>\n            <form onSubmit={handleSubmit}>\n                <input\n                    type=\"email\"\n                    id=\"email\"\n                    name=\"email\"\n                    placeholder=\"email\"\n                    required={true}\n                    onChange={(e) => setEmail(e.target.value)}\n                />\n                <input\n                    type=\"password\"\n                    id=\"password\"\n                    name=\"password\"\n                    placeholder=\"password\"\n                    required={true}\n                    onChange={(e) => setPassword(e.target.value)}\n                />\n                {isSignUp && <input\n                    type=\"password\"\n                    id=\"password-check\"\n                    name=\"password-check\"\n                    placeholder=\"confirm password\"\n                    required={true}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                />}\n                <input className=\"secondary-button\" type=\"submit\"/>\n                <p>{error}</p>\n            </form>\n\n            <hr/>\n            <h2>GET THE APP</h2>\n\n        </div>\n    )\n}\nexport default AuthModal\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}